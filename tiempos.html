<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Analisis de tiempos Secado Mec谩nico</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
 <style>
/* ===============================
   RESET Y BASE
================================ */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
}

body {
  font-family: 'Segoe UI', 'Roboto', -apple-system, BlinkMacSystemFont, sans-serif;
  background: linear-gradient(135deg, #f2f2f2 0%, #e6e6e6 100%);
  color: #333;
  padding: 16px;
  line-height: 1.5;
  min-height: 100vh;
}

/* ===============================
   CABECERA
================================ */
.header {
  text-align: center;
  margin-bottom: 24px;
  padding: 16px;
  background: #ffffff;
  border-radius: 16px;
  box-shadow: 0 6px 18px rgba(134, 0, 99, 0.12);
}

.header h1 {
  font-size: 1.5rem;
  color: #860063;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.header i {
  color: #f78c2a;
}

/* ===============================
   SECCIONES
================================ */
.section {
  margin-bottom: 24px;
  background: #ffffff;
  padding: 20px;
  border-radius: 16px;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
  position: relative;
  overflow: hidden;
}

.section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  height: 4px;
  width: 100%;
  background: linear-gradient(to right, #860063, #f78c2a);
}

/* ===============================
   TTULOS DE SECCIN
================================ */
.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.section-header h2 {
  font-size: 1.3rem;
  color: #860063;
  display: flex;
  align-items: center;
  gap: 8px;
}

/* ===============================
   TARJETAS
================================ */
.cards {
  display: grid;
  gap: 16px;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
}

/* === Primeras 3 tarjetas (marca) === */
.card:nth-child(1) {
  background: linear-gradient(135deg, #860063, #b34a8d);
  color: #fff;
}

.card:nth-child(2) {
  background: linear-gradient(135deg, #f78c2a, #ffc085);
  color: #fff;
}

.card:nth-child(3) {
  background: linear-gradient(135deg, #00a5b5, #6fd3dc);
  color: #fff;
}

/* === Resto de tarjetas === */
.card:nth-child(n+4) {
  background: linear-gradient(135deg, #ffffff, #f4f4f4);
  color: #333;
}

.card {
  padding: 18px 14px;
  border-radius: 14px;
  text-align: center;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.12);
  transition: all 0.3s ease;
  display: flex;
  flex-direction: column;
  justify-content: center;
  min-height: 110px;
  position: relative;
  overflow: hidden;
}

.card::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    rgba(255, 255, 255, 0.12),
    rgba(0, 0, 0, 0.05)
  );
  pointer-events: none;
}

.card:active,
.card:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 22px rgba(0, 0, 0, 0.18);
}

/* ===============================
   TEXTO DE TARJETAS
================================ */
.card-title {
  font-weight: 600;
  font-size: 0.9rem;
  margin-bottom: 8px;
  line-height: 1.3;
}

.card:nth-child(n+4) .card-title {
  color: #555;
}

.card-value {
  font-size: 1.5rem;
  font-weight: bold;
}

.card:nth-child(n+4) .card-value {
  color: #860063;
}

/* ===============================
   TARJETA DESTACADA DISCRETA
================================ */
.card.destacada-vertical {
  background: linear-gradient(135deg, #ffffff, #f4f4f4);
  border-left: 5px solid #ffffff; /* Azul corporativo */
  box-shadow: 0 6px 16px rgba(255, 255, 255, 0.18);
}



.card.destacada-vertical .card-title {
  color: #444;
}

.card.destacada-vertical .card-value {
  color: #860063; /* color principal de marca */
  font-weight: 700;
}

/* Hover suave (igual a cards normales pero un poco m谩s elegante) */
.card.destacada-vertical:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 22px rgba(55, 53, 192, 0.25);
}


/* ===============================
   BOTONES Y FILTROS
================================ */
.toggle-btn {
  padding: 10px 16px;
  border-radius: 10px;
  border: none;
  background: linear-gradient(to right, #860063, #f78c2a);
  color: #fff;
  cursor: pointer;
  font-size: 0.9rem;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 6px;
  box-shadow: 0 4px 10px rgba(134, 0, 99, 0.35);
}

.toggle-btn:active {
  transform: scale(0.97);
}

.filter {
  margin-bottom: 20px;
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  background: #f7f7f7;
  padding: 16px;
  border-radius: 12px;
}

.filter label {
  font-weight: 600;
  color: #860063;
}

select {
  padding: 12px 16px;
  border-radius: 10px;
  border: 1px solid #ccc;
  background: #fff;
  font-size: 0.95rem;
}

select:focus {
  outline: none;
  border-color: #00a5b5;
  box-shadow: 0 0 0 3px rgba(0, 165, 181, 0.25);
}

/* ===============================
   ESTADOS
================================ */
.loading {
  text-align: center;
  padding: 40px;
  color: #3735c0;
}

.error {
  text-align: center;
  padding: 20px;
  background: #ffeaea;
  border-radius: 12px;
  color: #d83548;
}

/* ===============================
   RESPONSIVE
================================ */
@media (max-width: 768px) {
  body { padding: 12px; }
  .cards { grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); }
}

@media (max-width: 480px) {
  .cards { grid-template-columns: 1fr 1fr; }
  .section-header { flex-direction: column; align-items: flex-start; }
}

/* ===============================
   ANIMACIONES
================================ */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

.card {
  animation: fadeIn 0.5s ease forwards;
  opacity: 0;
}

/* Scroll suave */
html { scroll-behavior: smooth; }



</style>

</head>
<body>
  <!-- CABECERA -->
  <div class="header">
    <h1><i class="fas fa-chart-line"></i> Analisis de tiempos Secado Mec谩nico</h1>
  </div>

  <!-- SECCIN 1 -->
  <div class="section" id="promedios-generales">
    <div class="section-header">
      <h2><i class="fas fa-chart-bar"></i> Generales</h2>
    </div>
    <div class="cards" id="cards-generales">
      <div class="loading">
        <i class="fas fa-spinner fa-spin"></i> Cargando datos generales...
      </div>
    </div>
  </div>

  <!-- SECCIN 2 -->
  <div class="section" id="tren-verticales">
    <div class="section-header">
      <h2><i class="fas fa-industry"></i> Verticales</h2>
      <button class="toggle-btn" onclick="toggleSection('cards-trenes')">
        <i class="fas fa-eye"></i> <span class="toggle-text">Mostrar</span>
      </button>
    </div>
    <div class="cards" id="cards-trenes" style="display:none;"></div>
  </div>

  <!-- SECCIN 3 -->
  <div class="section" id="guardiolas">
    <div class="section-header">
      <h2><i class="fas fa-tachometer-alt"></i> Guardiolas</h2>
      <button class="toggle-btn" onclick="toggleSection('cards-guardiolas')">
        <i class="fas fa-eye"></i> <span class="toggle-text">Mostrar</span>
      </button>
    </div>
    <div class="filter">
      <label for="guardiolas-filter"><i class="fas fa-filter"></i> Filtrar:</label>
      <select id="guardiolas-filter">
        <option value="general">Todos</option>
        <option value="directas">Cargas directas</option>
        <option value="completos">Ciclos completos</option>
      </select>
    </div>
    <div class="cards" id="cards-guardiolas" style="display:none;"></div>
  </div>
<!-- BOTN FLOTANTE -->
<a href="index.html" id="boton-flotante" class="boton-flotante"> Inicio</a>

<style>
/* Estilo del bot贸n flotante */
.boton-flotante {
  position: fixed;
  bottom: 20px;               /* Distancia desde abajo */
  right: 20px;                /* Distancia desde la derecha */
  background-color: #007BFF;  /* Color azul */
  color: white;
  padding: 15px 20px;
  border-radius: 50px;
  text-decoration: none;
  font-weight: bold;
  font-size: 16px;
  opacity: 0.7;               /* Transparencia inicial */
  transition: opacity 0.3s, transform 0.3s;
  box-shadow: 0 4px 8px rgba(0,0,0,0.3);
  z-index: 1000;
}

.boton-flotante:hover {
  opacity: 1;                 /* Opaco al pasar el mouse */
  transform: scale(1.1);      /* Zoom sutil */
}

.boton-flotante.oculto {
  opacity: 0;
  transform: scale(0);
  pointer-events: none;       /* No se puede clicar mientras desaparece */
  transition: opacity 0.5s, transform 0.5s;
}
</style>

<script>
// Funci贸n para animar y redirigir al pulsar
const boton = document.getElementById('boton-flotante');

boton.addEventListener('click', function(e) {
  e.preventDefault();              // Evita que navegue de inmediato
  boton.classList.add('oculto');   // A帽ade animaci贸n de salida

  setTimeout(() => {
    window.location.href = boton.href; // Redirige tras animaci贸n
  }, 500); // Coincide con la transici贸n CSS
});
</script>

  <!-- MENSAJES DE ERROR -->
  <div id="error-container" style="display:none;"></div>

  <script>
    const SPREADSHEET_URL = "https://docs.google.com/spreadsheets/d/1lFHQO8f33dK2W9tDbg0_74_0fddNU449ooAy-WuHdvg/export?format=csv&gid=845379377";

    const headers = {
      generales: ["Promedio general de secado","Promedio de ciclo en verticales","Promedio general de secado en guardiolas"],
      trenes: ["Promedio de ciclo tren 1","Promedio de ciclo tren 2","Promedio de ciclo vertical 1","Promedio de ciclo vertical 2","Promedio de ciclo vertical 3","Promedio de ciclo vertical 4","Promedio de ciclo vertical 5","Promedio de ciclo vertical 6","Promedio de ciclo vertical 7","Promedio de ciclo vertical 8"],
      guardiolas: {
        general: ["Promedio general de secado en guardiolas","TiemposTren1Guardiolas","TiemposTren2Guardiolas","Promedio G1","Promedio G2","Promedio G3","Promedio G4","Promedio G5","Promedio G6","Promedio G7","Promedio G8","Promedio G9","Promedio G10","Promedio G11","Promedio G12","Promedio G13","Promedio G14","Promedio G15","Promedio G16","Promedio G17","Promedio G18"],
        directas: ["Promedio general de secado de cargas directas a guardiolas","Promedio cargas directas Tren 1","Promedio cargas directas Tren 2","Promedio cargas directas G1","Promedio cargas directas G2","Promedio cargas directas G3","Promedio cargas directas G4","Promedio cargas directas G5","Promedio cargas directas G6","Promedio cargas directas G7","Promedio cargas directas G8","Promedio cargas directas G9","Promedio cargas directas G10","Promedio cargas directas G11","Promedio cargas directas G12","Promedio cargas directas G13","Promedio cargas directas G14","Promedio cargas directas G15","Promedio cargas directas G16","Promedio cargas directas G17","Promedio cargas directas G18"],
        completos: ["Promedio general de secado ciclo completo","Promedio ciclo completo Tren 1","Promedio ciclo completo Tren 2","Promedio ciclo completo G1","Promedio ciclo completo G2","Promedio ciclo completo G3","Promedio ciclo completo G4","Promedio ciclo completo G5","Promedio ciclo completo G6","Promedio ciclo completo G7","Promedio ciclo completo G8","Promedio ciclo completo G9","Promedio ciclo completo G10","Promedio ciclo completo G11","Promedio ciclo completo G12","Promedio ciclo completo G13","Promedio ciclo completo G14","Promedio ciclo completo G15","Promedio ciclo completo G16","Promedio ciclo completo G17","Promedio ciclo completo G18"]
      }
    };

    function renderCards(containerId, labels, data) {
  const container = document.getElementById(containerId);
  container.innerHTML = "";

  if (!data || Object.keys(data).length === 0) {
    container.innerHTML = `<div class="error">No hay datos disponibles</div>`;
    return;
  }

  labels.forEach(label => {
    const value = data[label]?.trim() || "-";
    const card = document.createElement("div");
    card.className = "card";

    //  DESTACAR TARJETA ESPECFICA
    if (label === "Promedio de ciclo vertical 1") {
      card.classList.add("destacada-vertical");
    }

    card.innerHTML = `
      <div class="card-title">${label}</div>
      <div class="card-value">${value}</div>
    `;

    container.appendChild(card);
  });
}


    function toggleSection(id) {
      const el = document.getElementById(id);
      const isHidden = el.style.display === "none";
      el.style.display = isHidden ? "grid" : "none";
      
      // Actualizar texto del bot贸n
      const btn = el.closest(".section").querySelector(".toggle-btn");
      const icon = btn.querySelector("i");
      const text = btn.querySelector(".toggle-text");
      
      if (isHidden) {
        icon.className = "fas fa-eye-slash";
        text.textContent = "Ocultar";
      } else {
        icon.className = "fas fa-eye";
        text.textContent = "Mostrar";
      }
      
      // Animar la aparici贸n/desaparici贸n
      if (isHidden) {
        el.style.opacity = "0";
        setTimeout(() => {
          el.style.transition = "opacity 0.3s ease";
          el.style.opacity = "1";
        }, 10);
      }
    }

    function showError(message) {
      const container = document.getElementById("error-container");
      container.style.display = "block";
      container.innerHTML = `
        <div class="error">
          <i class="fas fa-exclamation-triangle"></i>
          <p>${message}</p>
          <button class="refresh-btn" onclick="loadData()">
            <i class="fas fa-redo"></i> Reintentar
          </button>
        </div>
      `;
    }

    async function loadData() {
      try {
        // Ocultar cualquier error anterior
        document.getElementById("error-container").style.display = "none";
        
        const res = await fetch(SPREADSHEET_URL);
        
        if (!res.ok) {
          throw new Error(`Error HTTP: ${res.status}`);
        }
        
        const text = await res.text();
        
        if (!text || text.trim().length === 0) {
          throw new Error("La hoja de c谩lculo est谩 vac铆a o no se pudo acceder");
        }
        
        const rows = text.split("\n").map(r => r.split(","));
        
        if (rows.length < 2) {
          throw new Error("Formato de datos incorrecto");
        }
        
        const keys = rows[0];
        const values = rows[1];
        const data = {};
        keys.forEach((k,i) => data[k.trim()] = values[i]?.trim());

        // Renderizar datos
        renderCards("cards-generales", headers.generales, data);
        renderCards("cards-trenes", headers.trenes, data);
        renderCards("cards-guardiolas", headers.guardiolas.general, data);

        // Configurar filtro de guardiolas
        document.getElementById("guardiolas-filter").addEventListener("change", (e)=>{
          const value = e.target.value;
          if(value==="directas") renderCards("cards-guardiolas", headers.guardiolas.directas, data);
          else if(value==="completos") renderCards("cards-guardiolas", headers.guardiolas.completos, data);
          else renderCards("cards-guardiolas", headers.guardiolas.general, data);
        });

      } catch(err) {
        console.error("Error cargando datos:", err);
        showError(`No se pudieron cargar los datos: ${err.message}`);
      }
    }

    // Cargar datos al iniciar y cada 5 minutos
    loadData();
    setInterval(loadData, 5 * 60 * 1000);
    
    // Mejorar experiencia t谩ctil
    document.addEventListener('touchstart', function() {}, {passive: true});
  </script>

</body>
</html>
